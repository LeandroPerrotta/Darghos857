<?xml version="1.0"?>
<npc name="Captain Georgeus" floorchange="0" walkinterval="4000">
	<health now="150" max="150"/>
	<look type="129" head="11" body="87" legs="11" feet="87"/>
  
<interaction talkradius="3" range="3" idletime="30" idleinterval="300" defaultpublic="0">
    
    <interact keywords="hi" focus="1">
      <!--These are the keywords will trigger this interaction-->
      <keywords>hello</keywords>

      <response>
        <action name="script">
        <![CDATA[
          if(getPlayerSex(cid)) == 0 then
            selfSay("Welcome on board, Madam " .. getCreatureName(cid) .. ". I can help you to leave from isle of peace.", cid)
          else
            selfSay("Welcome on board, Sir " .. getCreatureName(cid) .. ". I can help you to leave from isle of peace.", cid)
          end
        ]]>
        </action>
      </response>
      
    </interact>

    <interact keywords="bye" focus="0">
      <keywords>farewell</keywords>
      <response text="Good bye. Recommend us, if you were satisfied with our service.">
        <!--
        <action name="script">
          doRemoveCreature(getNpcCid());
        </action>
        -->
      </response>
    </interact>

    <!--This event triggers if the player goes to far away from the npc/logout/idle timeout-->
    <interact event="onPlayerLeave" focus="0">
      <response text="Good bye. Recommend us, if you were satisfied with our service."/>
    </interact>

	<interact keywords="leave">
		<response>
			<action name="script">
			<![CDATA[
				
			if(getPlayerLevel(cid) < 60) then
				selfSay("I see that you are very newbie to leave from island of peace, outside there is a dark and dangerous world and leaving from island of peace is impossible to return back. Do you are sure want to leave?", cid)
				_state.topic = 1
			else
				local playerGUID = getPlayerGUID(cid)
			
				if(getPlayerDepotItems(cid, 6) > 1) then
					selfSay("You have items in your depot of island of peace. Please send your depot itens to city you want to travel!", cid)
				elseif(getHouseByPlayerGUID(playerGUID) ~= LUA_NULL) then
					selfSay("You have an house on island of peace. To leave from here you need dispose from your house!", cid)
				else
					selfSay("You have learned all that is necessary to leave the island of peace! Do you like to travel to which city?", cid)
					_state.topic = 2				
				end
			end

			]]>
			</action>
		</response>			
	</interact>	

	<interact keywords="yes" topic="1">
		<response>
			<action name="script">
			<![CDATA[
				
			if(getPlayerDepotItems(cid, 6) > 1) then
				selfSay("You have items in your depot of island of peace. Please send your depot itens to city you want to travel!", cid)
			elseif(getHouseByPlayerGUID(playerGUID) ~= LUA_NULL) then
				selfSay("You have an house on island of peace. To leave from here you need dispose from your house!", cid)				
			else
				selfSay("Okay, you are very brave! Do you like to travel to which city?", cid)
				_state.topic = 2	
			end

			]]>
			</action>	
		</response>
	</interact>	
		
	<interact keywords="quendor" topic="2">	
		<response text="Have a good luck in your new journey!">
			<action name="idle" value="1"/>
			<action name="teleport" value="1925;1865;6"/>
			<action name="effect" value="teleport"/>
			
			<action name="script">
			<![CDATA[
			setPlayerStorageValue(cid, sid.ON_ISLAND_OF_PEACE, 1)
			]]>
			</action>			
		</response>
	</interact>
	
	<interact keywords="thorn" topic="2">	
		<response text="Have a good luck in your new journey!">
			<action name="idle" value="1"/>
			<action name="teleport" value="2455;1861;6"/>
			<action name="effect" value="teleport"/>
			
			<action name="script">
			<![CDATA[
			setPlayerStorageValue(cid, sid.ON_ISLAND_OF_PEACE, 1)
			]]>
			</action>			
		</response>
	</interact>		
	
	<interact keywords="aracura" topic="2">	
		<response param="free" text="Only premium players can travel to this city."/>
		
		<response text="Have a good luck in your new journey!">
			<action name="idle" value="1"/>
			<action name="teleport" value="3005;1119;6"/>
			<action name="effect" value="teleport"/>
			
			<action name="script">
			<![CDATA[
			setPlayerStorageValue(cid, sid.ON_ISLAND_OF_PEACE, 1)
			]]>
			</action>			
		</response>
	</interact>		

	<interact keywords="salazart" topic="2">
		<response param="free" text="Only premium players can travel to this city."/>		
		
		<response text="Have a good luck in your new journey!">
			<action name="idle" value="1"/>
			<action name="teleport" value="2166;2718;6"/>
			<action name="effect" value="teleport"/>
			
			<action name="script">
			<![CDATA[
			setPlayerStorageValue(cid, sid.ON_ISLAND_OF_PEACE, 1)
			]]>
			</action>			
		</response>
	</interact>		

	<interact keywords="northrend" topic="2">
		<response param="free" text="Only premium players can travel to this city."/>	
		
		<response text="Have a good luck in your new journey!">
			<action name="idle" value="1"/>
			<action name="teleport" value="2025;1235;6"/>
			<action name="effect" value="teleport"/>
			
			<action name="script">
			<![CDATA[
			setPlayerStorageValue(cid, sid.ON_ISLAND_OF_PEACE, 1)
			]]>
			</action>			
		</response>
	</interact>	
	
  </interaction>
  
</npc>